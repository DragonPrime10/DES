## Welcome to my DES
- By Reid Wilson and Matt Law

Here we can show you how we went about designing and implementing a 64-bit DES within system verilog.

We began with a set of templates designed by our teacher, Dr. James E. Stine Jr.  They provided the initial and final permutations as well as the s-blocks, but left the rest down to us to design.  We began by designing PC1 and PC2, according to the tables provided by [this document](https://page.math.tu-berlin.de/~kant/teaching/hess/krypto-ws2006/des.htm) and the teacher's own resources.

Once those were complete, we designed the straight and expansion functions, which were also available on tables on aforementioned documents.

The round and feistel blocks were the most difficult sections to design, and required explainations from various videos and other people to figure out.  The code is included below, along with the [primary video resource](https://www.youtube.com/watch?v=Sy0sXa73PZA) that was used to understand them both.

#### Round Block:
```markdown
module round (in_block, subkey, out_block);

   input logic [63:0]  in_block;
   input logic [47:0]  subkey;
   output logic [63:0] out_block;
   logic [31:0] R_block;
   logic [31:0] L_block;
   
   assign L_block = in_block[63:32];
   assign R_block = in_block[31:0];
   
   logic [31:0] L2_block;
   assign L2_block = R_block[31:0];
   
   logic [31:0] P_feistel;
   feistel f(R_block, subkey, P_feistel);
   
   logic [31:0] R2_block;
   assign R2_block = L_block ^ P_feistel;
   
   assign out_block = {L2_block[31:0], R2_block[31:0]};
 
endmodule // round1
```

#### Feistel Block:
```markdown
module feistel (inp_block, subkey, out_block);

	input logic [31:0]  inp_block;
	input logic [47:0]  subkey;
	output logic [31:0] out_block;
	logic [47:0] expanded_block;
	logic [47:0] intermediate_block;

	EF expand(inp_block, expanded_block);
	assign intermediate_block = expanded_block ^ subkey;

	//S Box division and assignment
	logic [5:0] sb1in, sb2in, sb3in, sb4in, sb5in, sb6in, sb7in, sb8in;

	assign sb1in = intermediate_block[47:42];
	assign sb2in = intermediate_block[41:36];
	assign sb3in = intermediate_block[35:30];
	assign sb4in = intermediate_block[29:24];
	assign sb5in = intermediate_block[23:18];
	assign sb6in = intermediate_block[17:12];
	assign sb7in = intermediate_block[11:6];
	assign sb8in = intermediate_block[5:0];

	//send divided bits to S boxes
	logic [3:0] sb1out, sb2out, sb3out, sb4out, sb5out, sb6out, sb7out, sb8out;

	//combine sb1-8out
	logic [31:0] s_combined;

	S1_Box s1 (sb1in, s_combined[31:28]);
	S2_Box s2 (sb2in, s_combined[27:24]);
	S3_Box s3 (sb3in, s_combined[23:20]);
	S4_Box s4 (sb4in, s_combined[19:16]);
	S5_Box s5 (sb5in, s_combined[15:12]);
	S6_Box s6 (sb6in, s_combined[11:8]);
	S7_Box s7 (sb7in, s_combined[7:4]);
	S8_Box s8 (sb8in, s_combined[3:0]);

	//straight diffusion
	SF straight(s_combined, out_block);

endmodule // Feistel
```
Once done with that, we created each of the 16 rounds that would be used, using bit swizzling to accelerate the process, and sent the output of each round to the input of the next round.  When round 16 was over, we sent that output into the final permutation to get the final output.

### Troubleshooting

Most of our trouble laid in actually troubleshooting the project.  Our primary methods of troubleshooting involved checking our waveforms to make sure they were correct (With the color green signalling that they were correct), and checking the DES.out file that was generated by our testbench file.  Both are shown below.

#### DES.out
```markdown
123456abcd132536 133457799bbcdff1 1 || f77bcd7dfe57e119 || f77bcd7dfe57e119 1
2579db866c0f528c 433e4529462a4a62 1 || ecb54739a1832ec5 || ecb54739a1832ec5 1
ed7bc587a26f8c67 3b3898371520f75e 1 || ea37231a9ad2e5d9 || ea37231a9ad2e5d9 1
318101b45f32078d 0e329232ea6d0d73 1 || 7f0ec241ebbdcf2b || 7f0ec241ebbdcf2b 1
f77bcd7dfe57e119 133457799bbcdff1 0 || 123456abcd132536 || 123456abcd132536 1
ecb54739a1832ec5 433e4529462a4a62 0 || 2579db866c0f528c || 2579db866c0f528c 1
ea37231a9ad2e5d9 3b3898371520f75e 0 || ed7bc587a26f8c67 || ed7bc587a26f8c67 1
7f0ec241ebbdcf2b 0e329232ea6d0d73 0 || 318101b45f32078d || 318101b45f32078d 1

## The ones on the right hand side indicated that our code works
```

#### Waveforms:



Whenever you commit to this repository, GitHub Pages will run [Jekyll](https://jekyllrb.com/) to rebuild the pages in your site, from the content in your Markdown files.

### Markdown

Markdown is a lightweight and easy-to-use syntax for styling your writing. It includes conventions for

```markdown
Syntax highlighted code block

# Header 1
## Header 2
### Header 3

- Bulleted
- List

1. Numbered
2. List

**Bold** and _Italic_ and `Code` text

[Link](url) and ![Image](src)
```

For more details see [Basic writing and formatting syntax](https://docs.github.com/en/github/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax).

### Jekyll Themes

Your Pages site will use the layout and styles from the Jekyll theme you have selected in your [repository settings](https://github.com/DragonPrime10/DES/settings/pages). The name of this theme is saved in the Jekyll `_config.yml` configuration file.

### Support or Contact

Having trouble with Pages? Check out our [documentation](https://docs.github.com/categories/github-pages-basics/) or [contact support](https://support.github.com/contact) and weâ€™ll help you sort it out.
